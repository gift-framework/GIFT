name: Test GIFT Framework

on:
  push:
    branches: [ main, develop ]
  pull_request:
    branches: [ main ]

jobs:
  test:
    runs-on: ubuntu-latest
    strategy:
      matrix:
        python-version: [3.9, '3.10']

    steps:
    - uses: actions/checkout@v3
    
    - name: Set up Python ${{ matrix.python-version }}
      uses: actions/setup-python@v3
      with:
        python-version: ${{ matrix.python-version }}
    
    - name: Install dependencies
      run: |
        python -m pip install --upgrade pip
        pip install -r requirements.txt
    
    - name: Test basic imports
      run: |
        python -c "import numpy, matplotlib, pandas, scipy; print('✅ All imports successful!')"
    
    - name: Test GIFT framework execution
      run: |
        python gift-notebook.py
    
    - name: Test Jupyter notebook version (if exists)
      run: |
        if [ -f "gift-notebook.ipynb" ]; then
          pip install nbconvert
          jupyter nbconvert --execute --to notebook gift-notebook.ipynb --output test-output
          echo "✅ Jupyter notebook test passed"
        else
          echo "ℹ️ No .ipynb file found, skipping Jupyter test"
        fi
